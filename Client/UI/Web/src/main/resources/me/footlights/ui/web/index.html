<html>
	<head>
		<link rel="stylesheet" type="text/css" href="/static/footlights/style/footlights.css"/>

		<script type="text/javascript" src="/static/footlights/ses/whitelist.js"></script>
		<script type="text/javascript" src="/static/footlights/ses/atLeastFreeVarNames.js"></script>
		<script type="text/javascript" src="/static/footlights/ses/WeakMap.js"></script>
		<script type="text/javascript" src="/static/footlights/ses/initSES.js"></script>

		<script type="text/javascript" src="/static/footlights/dom-proxy.js"></script>
		<script type="text/javascript" src="/static/footlights/sandboxes.js"></script>

		<script type="text/javascript" src="/static/footlights/content-updaters.js"></script>
		<script type="text/javascript" src="/static/footlights/ajax.js"></script>
		<!--<script type="text/javascript" src="/logging.js"></script>-->
	</head>
	
	<body>
		<h1>Footlights</h1>

		<div id="root">
			<div id="status"></div>

			<div id="content">
				<div id="buttons">Loading buttons...</div>
			</div>
		</div>

		<script type="text/javascript">
'use strict';
initSES(window, whitelist, atLeastFreeVarNames);

(function()
{
	// Set up logging (nice user-visible log box).
	var status = document.getElementById('status');
	status.log = function(t)
	{
		var update = document.createElement('p');
		this.insertBefore(update, this.firstChild);

		var dateStamp = document.createElement('div');
		dateStamp.appendChild(document.createTextNode(new Date().toUTCString()));
		dateStamp.className = 'timestamp';

		update.appendChild(dateStamp);
		update.appendChild(document.createTextNode(t));
	};

	// The global context.
	var rootContext =
	{
		ajax: function(request) { ajax(request, this); },
		exec: function(code) { eval(code); },
		log:  function(message) { status.log(message); },
		name: 'global',
		root: document.getElementById('content'),
	};
	sandboxes['global'] = rootContext;

	ajax('ajax/global/initialize', rootContext);
})();
		</script>


		<!--
		<iframe src="Footlights.jnlp" height="1" style="border: none"/>
		-->
	</body>
</html>
