<html>
	<head>
		<title>Footlights</title>
		<link rel="stylesheet" type="text/css" href="/static/footlights/style/footlights.css"/>

		<script type="text/javascript" src="/static/footlights/ses/whitelist.js"></script>
		<script type="text/javascript" src="/static/footlights/ses/atLeastFreeVarNames.js"></script>
		<script type="text/javascript" src="/static/footlights/ses/WeakMap.js"></script>
		<script type="text/javascript" src="/static/footlights/ses/initSES.js"></script>

		<script type="text/javascript" src="/static/footlights/dom-proxy.js"></script>
		<script type="text/javascript" src="/static/footlights/sandboxes.js"></script>

		<script type="text/javascript" src="/static/footlights/ajax.js"></script>
	</head>
	
	<body>
		<h1>Footlights</h1>

		<div id="root">
			<div id="status"></div>

			<div id="content">
				<div class="buttons">Loading buttons...</div>
			</div>
		</div>

		<script type="text/javascript">
'use strict';
initSES(window, whitelist, atLeastFreeVarNames);

(function()
{
	// Set up logging (nice user-visible log box).
	var status = document.getElementById('status');
	status.log = function(t)
	{
		var update = document.createElement('p');
		this.insertBefore(update, this.firstChild);

		var dateStamp = document.createElement('div');
		dateStamp.appendChild(document.createTextNode(new Date().toUTCString()));
		dateStamp.className = 'timestamp';

		update.appendChild(dateStamp);
		update.appendChild(document.createTextNode(t));
	};

	function log(message) { status.log(message); }
	var rootContext = sandboxes.wrap('global', log);

	// The root context has no inherent privileges: we must pass special things in.
	rootContext.root = proxy(document.getElementById('content'), rootContext);
	rootContext.globals['sandboxes'] = sandboxes;
	rootContext.globals['window'] = window;
	rootContext.globals['setTimeout'] = setTimeout;

	sandboxes['global'] = Object.freeze(rootContext);

	rootContext.ajax('init');
})();
		</script>


		<!--
		<iframe src="Footlights.jnlp" height="1" style="border: none"/>
		-->
	</body>
</html>
